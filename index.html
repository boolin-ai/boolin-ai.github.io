<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約フォーム</title>
    <link rel="stylesheet" href="https://boolin-ai.github.io/liff-form-app/style.css">
</head>
<body>
    <header>
        <h1>日本ウェルネス再生クリニック</h1>
    </header>
    <h2>日本ウェルネス再生クリニック LINE予約</h2>
    <div id="firstPage">
        <div class="dis">
            <p>
                【ご予約の注意点】<br>
                来院当日はカウンセリングのみのご予約となります。
            </p>
            <p>
                ＊以下の内容のご予約をご希望の方は、<br>
                お電話、もしくはLINEトークにてご連絡ください。<br>
                (電話応答・LINE対応時間10:00 - 19:00/<a href="tel:0120-4874-25">TEL 0120-4874-25</a>)<br>
                ・当日のご予約をご希望の方<br>
                ・当日にカウンセリング＋施術をご希望の方<br>
                ＊LINEメッセージは24時間お送りいただけますが、当院からのご返信は診療時間のみとさせていただきます。
            </p>
        </div>
        <button type="button" id="formStart" class="formBtn">予約へ進む</button>
        <p class="policy">
            プライバシーポリシー
        </p>
    </div>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const liffId = "2000050276-Kjj7lW0L"; // ここにLIFF IDを設定
            initializeLiff(liffId);

            // formStart要素を取得
            const formStart = document.getElementById('formStart');

            // formStart要素が存在するか確認し、イベントリスナーを追加
            if (formStart) {
                document.getElementById("formStart").onclick = function() {
                    // ページ遷移先のURL
                    const targetPath = "/form";
                    
                    // LIFF内でのページ遷移
                    liff.navigate(targetPath);
                };
            }
        });
    
        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                if (liff.isLoggedIn()) {
                    initializeApp();
                } else {
                    liff.login(); // ユーザーがログインしていない場合はログインを促す
                }
            }).catch((err) => {
                console.error('LIFF Initialization failed', err);
            });
        }
    
        function initializeApp() {
            liff.getProfile().then(profile => {
                const userId = profile.userId;
                const displayName = profile.displayName;
            }).catch(err => console.error(err));
        }

        // LIFF AppのエンドポイントURL
        const liffEndpointUrl = "https://liff.line.me/2000050276-Kjj7lW0L/form.html";

        // パーマリンクを作成するための関数
        function createPermanentLink(pageUrl) {
        liff.permanentLink
            .createUrlBy(pageUrl)
            .then((permanentLink) => {
            console.log(permanentLink);
            })
            .catch((error) => {
            console.log(error);
            });
        }

        // 指定されたページURLからパーマリンクを作成
        createPermanentLink(`${liffEndpointUrl}?q1=v1`);

        createPermanentLink(`${liffEndpointUrl}/path2?q1=v1&q2=v2`);

        // 例外処理を含むパーマリンクの作成
        createPermanentLink("https://boolin-ai.github.io/liff-form-app/");
    </script>
</body>
</html>    